(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(t,r,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return e(2496)}])},3037:function(t,r,e){"use strict";e.d(r,{Xq:function(){return s},x7:function(){return c},t2:function(){return i},h2:function(){return l}});var a=e(7066);let n=e(3454).env.NEXT_PUBLIC_BACKEND_URL||("localhost"===window.location.hostname?"http://localhost:5000":"https://pruebahola.onrender.com");async function i(){try{return(await a.Z.get("".concat(n,"/api/products"))).data}catch(t){throw alert("Error al obtener productos: "+((null==t?void 0:t.message)||t)),t}}async function c(){try{return(await a.Z.get("".concat(n,"/api/cart"))).data}catch(t){throw alert("Error al obtener el carrito: "+((null==t?void 0:t.message)||t)),t}}async function s(t){try{await a.Z.post("".concat(n,"/api/cart"),{id:t})}catch(t){throw alert("Error al agregar al carrito: "+((null==t?void 0:t.message)||t)),t}}async function l(t){try{await a.Z.delete("".concat(n,"/api/cart"),{data:{id:t}})}catch(t){throw alert("Error al quitar del carrito: "+((null==t?void 0:t.message)||t)),t}}},2496:function(t,r,e){"use strict";e.r(r),e.d(r,{default:function(){return w}});var a=e(5893),n=e(7294),i=e(3037),c=e(2653),s=e(8069),l=e(4246),o=e(3821),d=e(9203),u=e(5207),h=e(8163);function x(t){let{product:r,onAdd:e}=t;return(0,a.jsxs)(o.Z,{children:[(0,a.jsxs)(d.Z,{children:[(0,a.jsx)(l.Z,{variant:"h6",children:r.name}),(0,a.jsxs)(l.Z,{color:"text.secondary",children:["$",r.price]})]}),(0,a.jsx)(u.Z,{children:(0,a.jsx)(h.Z,{variant:"contained",color:"primary",onClick:()=>e(r.id),children:"Agregar al carrito"})})]})}var p=e(3367),m=e(8271);function j(t){let{cart:r,onRemove:e}=t;if(0===r.length)return(0,a.jsx)(l.Z,{color:"text.secondary",children:"El carrito est\xe1 vac\xedo."});let n=Object.values(r.reduce((t,r)=>(t[r.id]?t[r.id].quantity+=1:t[r.id]={...r,quantity:1},t),{}));return(0,a.jsx)("ul",{style:{listStyle:"none",padding:0},children:n.map(t=>(0,a.jsxs)("li",{style:{display:"flex",alignItems:"center",marginBottom:8},children:[(0,a.jsxs)("span",{style:{flex:1},children:[t.name," - $",t.price," ",t.quantity>1&&(0,a.jsxs)("b",{children:["(x",t.quantity,")"]})]}),(0,a.jsx)(p.Z,{color:"error",onClick:()=>e(t.id),children:(0,a.jsx)(m.Z,{})})]},t.id))})}var g=e(5382),f=e(4440),y=e(5369),Z=e(4466),v=e(9619);function w(){let[t,r]=(0,n.useState)([]),[e,o]=(0,n.useState)([]),[d,u]=(0,n.useState)(150),[p,m]=(0,n.useState)([]);(0,n.useEffect)(()=>{(async()=>{try{let t=await (0,i.t2)();r(t)}catch(t){alert("Error al cargar productos: "+((null==t?void 0:t.message)||t))}})()},[]),(0,n.useEffect)(()=>{(async()=>{try{let t=await (0,i.x7)();o(t)}catch(t){alert("Error al cargar el carrito: "+((null==t?void 0:t.message)||t))}})()},[]);let w=async t=>{try{await (0,i.Xq)(t);let r=await (0,i.x7)();o(r)}catch(t){alert("Error al agregar al carrito: "+((null==t?void 0:t.message)||t))}},b=async t=>{try{await (0,i.h2)(t);let r=await (0,i.x7)();o(r)}catch(t){alert("Error al quitar del carrito: "+((null==t?void 0:t.message)||t))}};return(0,a.jsxs)("div",{className:"landing-root",children:[(0,a.jsx)(c.Z,{position:"static",color:"primary",children:(0,a.jsx)(s.Z,{children:(0,a.jsx)(l.Z,{variant:"h6",component:"div",sx:{flexGrow:1},children:"Prueba T\xe9cnica - Perez Adrian"})})}),(0,a.jsxs)(y.Z,{children:[(0,a.jsx)(f.Z,{className:"landing-section",children:(0,a.jsx)(Z.ZP,{container:!0,spacing:3,className:"landing-products",children:t.map(t=>(0,a.jsx)(Z.ZP,{item:!0,xs:12,sm:6,md:4,children:(0,a.jsx)(x,{product:t,onAdd:w})},t.id))})}),(0,a.jsxs)(f.Z,{className:"landing-section landing-cart",children:[(0,a.jsx)(l.Z,{variant:"h5",gutterBottom:!0,children:"Carrito de compras"}),(0,a.jsx)(v.Z,{sx:{mb:2}}),(0,a.jsx)(j,{cart:e,onRemove:b}),(0,a.jsxs)(l.Z,{variant:"subtitle1",sx:{mt:2},children:["Total: $",e.reduce((t,r)=>t+r.price,0)]})]}),(0,a.jsxs)(f.Z,{className:"landing-section landing-budget",children:[(0,a.jsx)(l.Z,{variant:"h6",children:"Mejor combinaci\xf3n por presupuesto"}),(0,a.jsx)(g.Z,{label:"Presupuesto",type:"number",value:d,onChange:t=>u(Number(t.target.value)),inputProps:{min:0},size:"small",sx:{width:120}}),(0,a.jsx)(h.Z,{variant:"contained",onClick:()=>{m(function(t,r){let e=[],a=0,n=t.length;for(let i=0;i<1<<n;i++){let c=0,s=[];for(let e=0;e<n;e++)if(i&1<<e){if(c+t[e].price<=r)c+=t[e].price,s.push(t[e]);else{c=r+1;break}}c>a&&c<=r&&(a=c,e=s)}return e}(t,d))},children:"Buscar combinaci\xf3n \xf3ptima"}),p.length>0&&(0,a.jsxs)(f.Z,{sx:{mt:2},children:[(0,a.jsx)(l.Z,{variant:"subtitle1",children:"Productos seleccionados:"}),(0,a.jsx)("ul",{style:{listStyle:"none",padding:0},children:p.map(t=>(0,a.jsxs)("li",{children:[t.name," - $",t.price]},t.id))}),(0,a.jsxs)(l.Z,{variant:"subtitle2",children:["Total: $",p.reduce((t,r)=>t+r.price,0)]})]})]})]})]})}}},function(t){t.O(0,[66,585,888,774,179],function(){return t(t.s=8312)}),_N_E=t.O()}]);